# 双站RCS可视化与插值小工具说明

本文用通俗语言介绍仓库中的 Java 代码如何读取 CST 仿真软件导出的 RCS 数据文件，并在桌面应用中进行插值计算和可视化，帮助刚学完电磁场的同学快速理解。

## CST 输出的 `.txt` 数据长什么样？
- 每个入射方向有一个文件夹（例如 `方向3`），里面按频率存放文本文件（如 `方向3 f=10.txt`）。
- 文件前两行是表头与分隔线，后续每行是一次仿真采样，包含俯仰角 `Theta`、方位角 `Phi` 以及对应的散射截面 `Abs(RCS)`，单位是 dB(m²)。【F:稳定版1/cst仿真结果txt文件/DataReader.java†L14-L39】【F:稳定版1/cst仿真结果txt文件/cst仿真结果txt文件/方向3/方向3 f=10.txt†L1-L8】
- 代码仅使用前三列数值：`Theta`、`Phi`、`Abs(RCS)`，把它们看作在球面坐标系上标注的测量结果。

## 代码的主要流程
1. **批量读取数据**：`DataReader` 会扫描 `cst仿真结果txt文件/方向1~8` 目录，自动解析文件名中的频率和文件夹名中的入射方向，然后逐行读取每个文件，把 `Theta`/`Phi`/`RCS` 三个数字存入 `RCSData` 对象列表。【F:稳定版1/cst仿真结果txt文件/DataReader.java†L11-L89】【F:稳定版1/cst仿真结果txt文件/RCSData.java†L1-L40】
2. **插值计算**：`InterpolationEngine` 在已有的频率和入射方向网格上做二维线性插值。它先找与目标频率、入射方向最近的四个“角落”数据，再在球面角度上挑最近的测量点，最后两次线性插值给出目标角度的 RCS 近似值。【F:稳定版1/cst仿真结果txt文件/InterpolationEngine.java†L11-L105】
3. **桌面界面**：`RCSCalculator` 启动 Swing 窗口，加载数据和插值引擎后，把它们交给 `VisualizationPanel`。`VisualizationPanel` 提供频率、入射方向、俯仰角和方位角的输入框，点击“计算 RCS”后会显示插值结果，并在极坐标图上标出当前点，同时用颜色分布展示不同方向的测量值分布。【F:稳定版1/cst仿真结果txt文件/RCSCalculator.java†L6-L58】【F:稳定版1/cst仿真结果txt文件/VisualizationPanel.java†L7-L322】
4. **坐标工具**：`CoordinateTransformer` 提供球面与笛卡尔坐标互转及坐标旋转的辅助函数，便于后续扩展三维可视化或换坐标系计算。【F:稳定版1/cst仿真结果txt文件/CoordinateTransformer.java†L1-L56】

## 运行与使用思路
1. 确保 `cst仿真结果txt文件` 目录和里面的 `方向X` 文本文件与 Java 源文件在同一目录下。
2. 使用 `javac *.java` 编译后运行 `java RCSCalculator`，启动桌面程序。
3. 在界面上输入：
   - **频率 (MHz)**：CST 文件名里的频率数值。
   - **入射俯仰角/入射方位角 (度)**：入射波的俯仰和方位，可对应 CST 的入射设置；当前数据集中俯仰角默认为 0°。
   - **观测俯仰角/方位角 (度)**：观察方向的球面角度。
   - 目前已把 **方向1** 的传播方向 `(0, -1, 0)` 映射为入射俯仰角 `90°`、入射方位角 `270°` 存入数据；输入这两个角度即可复现方向1文档的结果。其他方向因缺少明确传播矢量，暂沿用旧的占位角度。
4. 点击“计算 RCS”，程序会用最近的测量数据进行插值，输出估计的散射截面值，并在极坐标图上标出位置。

这样你可以把 CST 仿真得到的离散 RCS 数据，用这个小工具快速查看任意方向、频率的近似散射特性，同时结合颜色和点位直观感受方向图的变化。
